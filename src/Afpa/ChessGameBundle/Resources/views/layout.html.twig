<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>{% block title %}Chess Game{% endblock %}</title>
        <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />

        {% block stylesheets %}
        {% endblock %}
        <link rel="stylesheet" type="text/css" href="{{asset("bundles/afpachessgame/css/global.css")}}" />

        <script type="text/javascript" src="{{ asset('bundles/afpachessgame/js/jquery-1.12.3.js') }}"></script>
        <script>
            $(document).ready(function () {
                first_click = true;
                $("#board td").click(function () {
                    // test 1 : Si c'est le premier click
                    if (first_click) {
                        // si oui , test 2 : y'atil une piece sur la case
                        if ($(this).html().indexOf('img') >= 0) {
                            selected_case = $(this);
                            // si oui, selectionner la piece
                            $.ajax({
                                async: true,
                                //context: this,
                                type: 'POST',
                                url: "{{ path('game_action') }}",
                                data: {
                                    x: $(this).data('x'),
                                    y: $(this).data('y')
                                },
                                error: function (dataerror) {
                                    console.log(dataerror);
                                },
                                success: function (data) {
                                    console.log(data);
                                    selected_case.css("background-color", "blue");
                                }
                            });

                            first_click = false;
                        }
                    }
                    //$(this).css("background-color", "blue");
                    console.log($(this).data('x') + ',' + $(this).data('y'));
                });
            });
        </script>
    </head>
    <body>
        <header>
            <div id="titre_principal">
                <div id="logo">
                    <img src="{{asset("bundles/AfpaChessGame/images/default/logo.jpg")}}"/>
                    <h1>Chess Game</h1>
                </div>
            </div>

            <nav>
                <ul>
                    <li><a href="{{ path("home")}}">Accueil</a></li>
                    <li><a href="{{ path("credits")}}">Credits</a></li>
                    <li><a href="{{ path("rules")}}">Rules</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>

            {% block img %}  {% endblock %}
        </header>
        {% block body %}
        {% endblock %}
    {% block javascripts %}{% endblock %}
</body>
</html>
